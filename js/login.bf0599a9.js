(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"555f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"preloader-wrapper big active"},[s("div",{staticClass:"spinner-layer spinner-blue"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])]),s("div",{staticClass:"spinner-layer spinner-red"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])]),s("div",{staticClass:"spinner-layer spinner-yellow"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])]),s("div",{staticClass:"spinner-layer spinner-green"},[s("div",{staticClass:"circle-clipper left"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"gap-patch"},[s("div",{staticClass:"circle"})]),s("div",{staticClass:"circle-clipper right"},[s("div",{staticClass:"circle"})])])])}],r={name:"Loader"},n=r,o=s("2877"),l=Object(o["a"])(n,a,i,!1,null,null,null);e["a"]=l.exports},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 m10 offset-m1 l8 offset-l2 xl6 offset-xl3"},[s("div",{staticClass:"card-panel hoverable"},[s("div",{staticClass:"switch right"},[s("label",[t._v("\n                    Acceso\n                    "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.pin,expression:"pin"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.pin)?t._i(t.pin,null)>-1:t.pin},on:{change:function(e){var s=t.pin,a=e.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=t._i(s,r);a.checked?n<0&&(t.pin=s.concat([r])):n>-1&&(t.pin=s.slice(0,n).concat(s.slice(n+1)))}else t.pin=i}}}),s("span",{staticClass:"lever green"}),t._v("\n                    Registro\n                    ")])]),s("h3",{staticClass:"justificado"},[t._v(t._s(t.pin?"Registro":"Acceso"))]),s("form",{on:{submit:function(e){return t.enviar(e)}}},[s("div",[t.pin?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s6"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.nombre,expression:"nombre",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vnombre?"":"red-text"],attrs:{id:"first_name",type:"text"},domProps:{value:t.nombre},on:{input:function(e){e.target.composing||(t.nombre=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.nombre?"active":""],attrs:{for:"first_name"}},[t._v("Nombre")])]),s("div",{staticClass:"input-field col s6"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.apellido,expression:"apellido",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vapellido?"":"red-text"],attrs:{id:"last_name",type:"text"},domProps:{value:t.apellido},on:{input:function(e){e.target.composing||(t.apellido=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.apellido?"active":""],attrs:{for:"last_name"}},[t._v("Apellido")])]),s("div",{staticClass:"input-field col s6"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vusuario?"":"red-text"],attrs:{id:"user_name",type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.username?"active":""],attrs:{for:"user_name"}},[t._v("Usuario")])]),s("div",{staticClass:"input-field col s6"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.dni,expression:"dni",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vdni?"":"red-text"],attrs:{id:"dni",type:"number",step:"1",min:"0"},domProps:{value:t.dni},on:{input:function(e){e.target.composing||(t.dni=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.dni?"active":""],attrs:{for:"dni"}},[t._v("DNI")])]),s("div",{staticClass:"input-field col s6"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.telefono,expression:"telefono",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vtelefono?"":"red-text"],attrs:{id:"telephone",type:"number",step:"1",min:"0"},domProps:{value:t.telefono},on:{input:function(e){e.target.composing||(t.telefono=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.telefono?"active":""],attrs:{for:"telephone"}},[t._v("Telefono")])])]):t._e()]),s("div",{staticClass:"row"},[t.pin?s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.correo,expression:"correo",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vcorreo?"":"red-text"],attrs:{id:"email",type:"email"},domProps:{value:t.correo},on:{input:function(e){e.target.composing||(t.correo=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.correo?"active":""],attrs:{for:"email"}},[t._v("Email")])]):t._e(),t.pin?t._e():s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vusuario?"":"red-text"],attrs:{id:"user_name2",type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.username?"active":""],attrs:{for:"user_name2"}},[t._v("Usuario")])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pass1,expression:"pass1",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vpas1?"":"red-text"],attrs:{id:"password",type:"password"},domProps:{value:t.pass1},on:{input:function(e){e.target.composing||(t.pass1=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.pass1?"active":""],attrs:{for:"password"}},[t._v("Password")])]),t.pin?t._e():s("p",{staticClass:"right"},[s("a",{staticClass:"btn btn-flat waves-effect transparent blue-text",on:{click:t.recuperar}},[t._v("Olvidé mi contraseña")])])]),t.pin?s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.pass2,expression:"pass2",modifiers:{trim:!0}}],staticClass:"validate",class:[t.vpas2?"":"red-text"],attrs:{id:"password2",type:"password"},domProps:{value:t.pass2},on:{input:function(e){e.target.composing||(t.pass2=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("label",{class:[""!=t.pass2?"active":""],attrs:{for:"password2"}},[t._v("Repita el Password")])])]):t._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{staticClass:"btn waves-effect green",class:[t.load?"disabled":""],attrs:{type:"submit"},domProps:{value:t.pin?"Registrar":"Acceder"}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.load,expression:"load"}],staticClass:"col s12 centrado"},[s("Loader")],1)])])])])]),s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("ul",{staticClass:"collapsible"},[s("li",[s("div",{staticClass:"collapsible-header"},[t._v("Data")]),s("div",{staticClass:"collapsible-body amber"},[s("pre",[t._v("                                "+t._s(t.$data)+"\n                            ")])])])])])])])])},i=[],r=(s("96cf"),s("3b8d")),n=s("cebc"),o=s("555f"),l=s("bc3a"),c=s.n(l),p=s("2f62");c.a.defaults.headers.post["Content-Type"]="application/json",c.a.defaults.headers.common["Content-Type"]="application/json";var d={name:"login",components:{Loader:o["a"]},data:function(){return{pin:!1,nombre:"",apellido:"",username:"",pass1:"",pass2:"",correo:"",telefono:"",dni:"",load:!1,respuesta:{}}},computed:Object(n["a"])({},Object(p["c"])(["logeado","api","clientID","secrete"]),{vnombre:function(){return""!=this.nombre&&!(this.nombre.length<3)},vapellido:function(){return""!=this.apellido&&!(this.apellido.length<3)},vusuario:function(){return""!=this.username&&!(this.username.length<5)},vdni:function(){return 8===this.dni.length},vtelefono:function(){return!(this.telefono.length<6)},vcorreo:function(){return""!=this.correo},vpas1:function(){if(""==this.pass1)return!1;if(this.pass1.length<8)return!1;var t=/^(?=.*\d)(?=.*[a-záéíóúüñ]).*[A-ZÁÉÍÓÚÜÑ]/;return!!t.test(this.pass1)},vpas2:function(){return this.pass1===this.pass2}}),methods:Object(n["a"])({},Object(p["b"])(["logear","logout"]),{enviar:function(t){t.preventDefault(),this.pin&&this.validado()?(this.load=!0,this.tryLogin()):this.pin||(this.load=!0,this.tryReg())},validado:function(){var t=!1,e="";this.pin?(t=""!=this.nombre&&""!=this.apellido&&""!=this.correo&&""!=this.username&&""!=this.correo&&""!=this.telefono&&""!=this.dni,e=t?"":"Todos los campos son obligatorios",t=t&&this.pass1==this.pass2&&""!=this.pass1,e+=this.pass1!=this.pass2||""==this.pass1?" Las contraseñas no son iguales":""):(t=""!=this.correo&&""!=this.pass1,e=t?"":"Todos los campos son obligatorios");var s=/^(?=.*\d)(?=.*[a-záéíóúüñ]).*[A-ZÁÉÍÓÚÜÑ]/;return s.test(this.pass1)||(e+=" La contraseña debe incluir un numero, letra min y mayuscula",t=!1),""!=e&&M.toast({html:e}),t},recuperar:function(){M.toast({html:"Envie un correo a recuperar@weblota.com.pe, desde el correo de la cuenta."})},tryLogin:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:c()({method:"POST",url:this.api+"/api/socceruser/",data:{dni:this.dni,username:this.username,first_name:this.nombre,last_name:this.apellido,password:this.pass1,email:this.correo,telephone:this.telefono},headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*"}}).then(function(t){e.load=!1,M.toast({html:"Usuario creado!"}),e.pin=!1,e.tryReg()}).catch(function(t){e.load=!1,M.toast({html:"Ocurrió un error!"})});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),tryReg:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:c()({method:"POST",url:this.api+"/o/token/?client_id="+this.clientID+"&client_secret="+this.secrete+"&grant_type=password&scope=read%20write&username="+this.username+"&password="+this.pass1,data:{},headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*"}}).then(function(t){e.load=!1,e.logear({nombre:e.username,datos:t.data}),M.toast({html:"Usuario Logeado!"}),e.$router.push("/")}).catch(function(t){e.load=!1,t.response?M.toast({html:t.response.data.error_description}):M.toast({html:"Ocurrió un error!"})});case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),doColapse:function(){var t=document.querySelectorAll(".collapsible");M.Collapsible.init(t,{})}}),mounted:function(){this.$nextTick(function(){this.logeado&&this.$router.push("/"),this.doColapse()})}},u=d,m=s("2877"),v=Object(m["a"])(u,a,i,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=login.bf0599a9.js.map