(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"456d":function(e,t,a){var s=a("4bf8"),i=a("0d58");a("5eda")("keys",function(){return function(e){return i(s(e))}})},"5eda":function(e,t,a){var s=a("5ca1"),i=a("8378"),r=a("79e5");e.exports=function(e,t){var a=(i.Object||{})[e]||Object[e],n={};n[e]=t(a),s(s.S+s.F*r(function(){a(1)}),"Object",n)}},a55b:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col s12 m10 offset-m1 l8 offset-l2 xl6 offset-xl3"},[a("div",{staticClass:"card-panel hoverable"},[a("div",{staticClass:"switch right"},[a("label",[e._v("\n                    Acceso\n                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pin,expression:"pin"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.pin)?e._i(e.pin,null)>-1:e.pin},on:{change:function(t){var a=e.pin,s=t.target,i=!!s.checked;if(Array.isArray(a)){var r=null,n=e._i(a,r);s.checked?n<0&&(e.pin=a.concat([r])):n>-1&&(e.pin=a.slice(0,n).concat(a.slice(n+1)))}else e.pin=i}}}),a("span",{staticClass:"lever green"}),e._v("\n                    Registro\n                    ")])]),a("h3",{staticClass:"justificado"},[e._v(e._s(e.pin?"Registro":"Acceso"))]),a("form",{on:{submit:function(t){return e.enviar(t)}}},[a("div",[e.pin?a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s6"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.nombre,expression:"nombre",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vnombre?"":"red-text"],attrs:{id:"first_name",type:"text"},domProps:{value:e.nombre},on:{input:function(t){t.target.composing||(e.nombre=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.nombre?"active":""],attrs:{for:"first_name"}},[e._v("Nombre")])]),a("div",{staticClass:"input-field col s6"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.apellido,expression:"apellido",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vapellido?"":"red-text"],attrs:{id:"last_name",type:"text"},domProps:{value:e.apellido},on:{input:function(t){t.target.composing||(e.apellido=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.apellido?"active":""],attrs:{for:"last_name"}},[e._v("Apellido")])]),a("div",{staticClass:"input-field col s6"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username,expression:"username",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vusuario?"":"red-text"],attrs:{id:"user_name",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.username?"active":""],attrs:{for:"user_name"}},[e._v("Usuario")])]),a("div",{staticClass:"input-field col s6"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.dni,expression:"dni",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vdni?"":"red-text"],attrs:{id:"dni",type:"number",step:"1",min:"0"},domProps:{value:e.dni},on:{input:function(t){t.target.composing||(e.dni=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.dni?"active":""],attrs:{for:"dni"}},[e._v("DNI")])]),a("div",{staticClass:"input-field col s6"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.telefono,expression:"telefono",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vtelefono?"":"red-text"],attrs:{id:"telephone",type:"number",step:"1",min:"0"},domProps:{value:e.telefono},on:{input:function(t){t.target.composing||(e.telefono=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.telefono?"active":""],attrs:{for:"telephone"}},[e._v("Teléfono")])])]):e._e()]),a("div",{staticClass:"row"},[e.pin?a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.correo,expression:"correo",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vcorreo?"":"red-text"],attrs:{id:"email",type:"email"},domProps:{value:e.correo},on:{input:function(t){t.target.composing||(e.correo=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.correo?"active":""],attrs:{for:"email"}},[e._v("Email")])]):e._e(),e.pin?e._e():a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username,expression:"username",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vusuario?"":"red-text"],attrs:{id:"user_name2",type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.username?"active":""],attrs:{for:"user_name2"}},[e._v("Usuario")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.pass1,expression:"pass1",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vpas1?"":"red-text"],attrs:{id:"password",type:"password"},domProps:{value:e.pass1},on:{input:function(t){t.target.composing||(e.pass1=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.pass1?"active":""],attrs:{for:"password"}},[e._v("Contraseña")])]),e.pin?e._e():a("p",{staticClass:"right"},[a("a",{staticClass:"btn btn-flat waves-effect transparent blue-text",on:{click:e.recuperar}},[e._v("Olvidé mi contraseña")])])]),e.pin?a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.pass2,expression:"pass2",modifiers:{trim:!0}}],staticClass:"validate",class:[e.vpas2?"":"red-text"],attrs:{id:"password2",type:"password"},domProps:{value:e.pass2},on:{input:function(t){t.target.composing||(e.pass2=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a("label",{class:[""!=e.pass2?"active":""],attrs:{for:"password2"}},[e._v("Repita la contraseña")])])]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"input-field col s12"},[a("input",{staticClass:"btn waves-effect green",class:[e.load?"disabled":""],attrs:{type:"submit"},domProps:{value:e.pin?"Registrar":"Acceder"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.load,expression:"load"}],staticClass:"col s12 centrado"},[a("Loader")],1)])])])])])])},i=[],r=(a("ac6a"),a("456d"),a("96cf"),a("3b8d")),n=a("cebc"),o=a("555f"),l=a("bc3a"),c=a.n(l),u=a("2f62");c.a.defaults.headers.post["Content-Type"]="application/json",c.a.defaults.headers.common["Content-Type"]="application/json";var d={name:"login",components:{Loader:o["a"]},data:function(){return{pin:!1,nombre:"",apellido:"",username:"",pass1:"",pass2:"",correo:"",telefono:"",dni:"",load:!1,respuesta:{}}},computed:Object(n["a"])({},Object(u["c"])(["logeado","api","clientID","secrete"]),{vnombre:function(){return""!=this.nombre&&!(this.nombre.length<3)},vapellido:function(){return""!=this.apellido&&!(this.apellido.length<3)},vusuario:function(){return""!=this.username&&!(this.username.length<5)},vdni:function(){return 8===this.dni.length},vtelefono:function(){return!(this.telefono.length<6)},vcorreo:function(){if(""==this.correo)return!1;var e=/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;return!!e.test(this.correo)},vpas1:function(){if(""==this.pass1)return!1;if(this.pass1.length<8)return!1;var e=/^(?=.*\d)(?=.*[a-záéíóúüñ]).*[A-ZÁÉÍÓÚÜÑ]/;return!!e.test(this.pass1)},vpas2:function(){return this.pass1===this.pass2}}),methods:Object(n["a"])({},Object(u["b"])(["logear","logout"]),{enviar:function(e){e.preventDefault(),this.pin&&this.validado()?(this.load=!0,this.tryReg()):this.pin||(this.load=!0,this.tryLogin())},validado:function(){return this.vnombre||M.toast({html:"El nombre debe tener al menos 3 letras."}),this.vapellido||M.toast({html:"El apellido debe tener al menos 3 letras."}),this.vusuario||M.toast({html:"El nombre de usuario debe tener al menos 3 letras."}),this.vdni||M.toast({html:"El DNI debe tener 8 dífitos."}),this.vtelefono||M.toast({html:"El telefono debe tener al menos 6 dígitos."}),this.vcorreo||M.toast({html:"El correo debe tener el formato xx@xx.xx"}),this.vpas1||M.toast({html:"La contraseña debe tener al menos 8 caracteres y debe contener minusculas, mayusculas y números."}),this.vpas2||M.toast({html:"Las contraseñas no son iguales."}),this.vnombre&&this.vapellido&&this.vusuario&&this.vdni&&this.vtelefono&&this.vcorreo&&this.vpas1&&this.vpas2},recuperar:function(){M.toast({html:"Envie un correo a recuperar@weblota.com.pe, desde el correo de la cuenta."})},tryReg:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c()({method:"POST",url:this.api+"/api/socceruser/",data:{dni:this.dni,username:this.username,first_name:this.nombre,last_name:this.apellido,password:this.pass1,email:this.correo,telephone:this.telefono},headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*"}}).then(function(e){t.load=!1,M.toast({html:"Usuario creado!"}),t.pin=!1,t.tryLogin()}).catch(function(e){if(t.load=!1,e.response&&e.response.data)if(Object.keys(e.response.data).length>0)for(var a in e.response.data)for(var s=0;s<e.response.data[a].length;s++)M.toast({html:e.response.data[a][s]});else M.toast({html:"Ocurrió un error!"});else M.toast({html:"Ocurrió un error!"})});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),tryLogin:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:c()({method:"POST",url:this.api+"/o/token/?client_id="+this.clientID+"&client_secret="+this.secrete+"&grant_type=password&scope=read%20write&username="+this.username+"&password="+this.pass1,data:{},headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*"}}).then(function(e){t.load=!1,t.logear({nombre:t.username,datos:e.data}),M.toast({html:"Usuario Logeado!"}),t.$router.push("/")}).catch(function(e){t.load=!1,console.log(e),e.response?M.toast({html:e.response.data.error_description}):M.toast({html:"Ocurrió un errorx2!"})});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doColapse:function(){var e=document.querySelectorAll(".collapsible");M.Collapsible.init(e,{})}}),mounted:function(){this.$nextTick(function(){this.logeado&&this.$router.push("/"),this.doColapse()})}},p=d,m=a("2877"),v=Object(m["a"])(p,s,i,!1,null,null,null);t["default"]=v.exports},ac6a:function(e,t,a){for(var s=a("cadf"),i=a("0d58"),r=a("2aba"),n=a("7726"),o=a("32e9"),l=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),p=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=i(m),f=0;f<v.length;f++){var h,b=v[f],g=m[b],C=n[b],w=C&&C.prototype;if(w&&(w[u]||o(w,u,p),w[d]||o(w,d,b),l[b]=p,g))for(h in s)w[h]||r(w,h,s[h],!0)}}}]);
//# sourceMappingURL=login.5a8d02f2.js.map